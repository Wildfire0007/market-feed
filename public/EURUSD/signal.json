{
  "asset": "EURUSD",
  "ok": true,
  "retrieved_at_utc": "2025-10-16T23:45:40Z",
  "source": "Twelve Data (lokális JSON)",
  "spot": {
    "price": 1.170138,
    "utc": "2025-10-16T23:40:00+00:00",
    "retrieved_at_utc": "2025-10-16T23:45:04+00:00"
  },
  "signal": "no entry",
  "probability": 29,
  "entry": null,
  "sl": null,
  "tp1": null,
  "tp2": null,
  "rr": null,
  "leverage": 30.0,
  "gates": {
    "mode": "core",
    "required": [
      "session",
      "regime",
      "bias",
      "bos5m",
      "liquidity(fib|ema21|swing|sweep|retest)",
      "atr",
      "rr_math>=2.0",
      "tp_min_profit",
      "min_stoploss",
      "tp1_net>=+0.35%"
    ],
    "missing": [
      "regime",
      "bias",
      "bos5m",
      "liquidity",
      "P_score>=50"
    ]
  },
  "session_info": {
    "open": true,
    "entry_open": true,
    "within_window": true,
    "within_entry_window": true,
    "within_monitor_window": true,
    "weekday_ok": true,
    "now_utc": "2025-10-16T23:45:40.147867+00:00",
    "windows_utc": [
      [
        0,
        0,
        23,
        59
      ]
    ],
    "time_zone": "Europe/Berlin",
    "windows_local_cet": [
      [
        "02:00",
        "01:59"
      ]
    ],
    "allowed_weekdays": [
      0,
      1,
      2,
      3,
      4,
      6
    ],
    "status": "open",
    "status_note": "Piac nyitva"
  },
  "diagnostics": {
    "timeframes": {
      "k1m": {
        "last_raw_utc": "2025-10-16T23:43:00Z",
        "last_closed_utc": "2025-10-16T23:42:00Z",
        "latency_seconds": 220,
        "expected_max_delay_seconds": 60,
        "source_mtime_utc": "2025-10-16T23:45:24Z"
      },
      "k5m": {
        "last_raw_utc": "2025-10-16T23:40:00Z",
        "last_closed_utc": "2025-10-16T23:35:00Z",
        "latency_seconds": 640,
        "expected_max_delay_seconds": 300,
        "source_mtime_utc": "2025-10-16T23:45:24Z"
      },
      "k1h": {
        "last_raw_utc": "2025-10-16T23:00:00Z",
        "last_closed_utc": "2025-10-16T22:00:00Z",
        "latency_seconds": 6340,
        "expected_max_delay_seconds": 3600,
        "source_mtime_utc": "2025-10-16T23:45:24Z"
      },
      "k4h": {
        "last_raw_utc": "2025-10-16T20:00:00Z",
        "last_closed_utc": "2025-10-16T16:00:00Z",
        "latency_seconds": 27940,
        "expected_max_delay_seconds": 14400,
        "source_mtime_utc": "2025-10-16T23:45:24Z"
      },
      "spot": {
        "last_raw_utc": "2025-10-16T23:40:00Z",
        "latency_seconds": 340,
        "expected_max_delay_seconds": 1200,
        "source_mtime_utc": "2025-10-16T23:45:24Z",
        "source": "quote",
        "fallback_used": false
      }
    },
    "source_files": {
      "spot.json": "2025-10-16T23:45:24Z",
      "klines_1m.json": "2025-10-16T23:45:24Z",
      "klines_5m.json": "2025-10-16T23:45:24Z",
      "klines_1h.json": "2025-10-16T23:45:24Z",
      "klines_4h.json": "2025-10-16T23:45:24Z"
    },
    "latency_flags": [
      "k5m: utolsó zárt gyertya 10 perc késésben van",
      "k1h: utolsó zárt gyertya 105 perc késésben van",
      "k4h: utolsó zárt gyertya 465 perc késésben van"
    ],
    "refresh_tips": [
      "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
      "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
      "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
      "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
      "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell."
    ]
  },
  "reasons": [
    "ATR rendben",
    "Diagnosztika: k5m: utolsó zárt gyertya 10 perc késésben van",
    "Diagnosztika: k1h: utolsó zárt gyertya 105 perc késésben van",
    "Diagnosztika: k4h: utolsó zárt gyertya 465 perc késésben van",
    "missing: regime, bias, bos5m, liquidity, P_score>=50"
  ],
  "ema21_slope_1h": 0.0005795094444269761,
  "ema21_slope_threshold": 0.001,
  "ema21_relation_1h": "above",
  "last_swing_high_1h": 1.16599,
  "last_swing_low_1h": 1.16849,
  "last_close_1h": 1.169864,
  "bos_5m_dir": "bos_up",
  "atr1h": 0.0012481428571428882,
  "atr5_threshold_abs": 8.5e-05,
  "liquidity_zone_ok": false,
  "invalid_levels": {
    "buy": 1.1678659285714286,
    "sell": 1.1666140714285715
  },
  "invalid_buffer_abs": 0.0006240714285714441,
  "active_position_meta": {
    "ema21_slope_abs": 0.0005795094444269761,
    "ema21_slope_signed": 0.0005795094444269761,
    "ema21_slope_threshold": 0.001,
    "ema21_relation": "above",
    "structure_5m": "bos_up",
    "atr1h": 0.0012481428571428882,
    "atr1h_trail_floor": 0.0006240714285714441,
    "atr5": 0.00014657142857136103,
    "atr5_rel": 0.00012525995102403395,
    "atr5_threshold": 7.264100473619352e-05,
    "atr5_threshold_abs": 8.5e-05,
    "bos1h_long": true,
    "bos1h_short": false,
    "regime_ok": false,
    "effective_bias": "neutral",
    "last_close_1h": 1.169864,
    "last_swing_high_1h": 1.16599,
    "last_swing_low_1h": 1.16849,
    "invalid_level_sell": 1.1666140714285715,
    "invalid_level_buy": 1.1678659285714286,
    "invalid_buffer_abs": 0.0006240714285714441
  }
}