{
  "ok": true,
  "generated_utc": "2025-10-22T19:11:09Z",
  "analysis_started_utc": "2025-10-22T19:11:09Z",
  "assets": {
    "EURUSD": {
      "asset": "EURUSD",
      "ok": false,
      "retrieved_at_utc": "2025-10-22T19:11:09Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 1.16073,
        "utc": "2025-10-22T19:04:20Z",
        "retrieved_at_utc": "2025-10-22T19:04:20+00:00"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 30,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": null,
        "within_window": null,
        "weekday_ok": null,
        "status": "unavailable",
        "status_note": "Hiányzó adat"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-22T19:02:00Z",
            "last_closed_utc": "2025-10-22T19:02:00Z",
            "latency_seconds": 549,
            "expected_max_delay_seconds": 180,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 420.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "EUR/USD",
            "used_exchange": "FX"
          },
          "k5m": {
            "last_raw_utc": "2025-10-22T19:00:00Z",
            "last_closed_utc": "2025-10-22T19:00:00Z",
            "latency_seconds": 669,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 1200.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "EUR/USD",
            "used_exchange": "FX"
          },
          "k1h": {
            "last_raw_utc": "2025-10-22T19:00:00Z",
            "last_closed_utc": "2025-10-22T19:00:00Z",
            "latency_seconds": 669,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 9000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "EUR/USD",
            "used_exchange": "FX"
          },
          "k4h": {
            "last_raw_utc": "2025-10-22T16:00:00Z",
            "last_closed_utc": "2025-10-22T16:00:00Z",
            "latency_seconds": 11469,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 36000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "EUR/USD",
            "used_exchange": "FX"
          },
          "spot": {
            "last_raw_utc": "2025-10-22T19:04:20Z",
            "latency_seconds": 409,
            "expected_max_delay_seconds": 900,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "source": "twelvedata:quote",
            "fallback_used": false,
            "realtime_override": true,
            "freshness_limit_seconds": 900.0,
            "freshness_retries": 0,
            "freshness_violation": false,
            "freshness_violation_meta": false,
            "used_symbol": "EUR/USD",
            "used_exchange": "FX"
          }
        },
        "source_files": {
          "spot.json": "2025-10-22T19:10:54Z",
          "klines_1m.json": "2025-10-22T19:10:54Z",
          "klines_5m.json": "2025-10-22T19:10:54Z",
          "klines_1h.json": "2025-10-22T19:10:54Z",
          "klines_4h.json": "2025-10-22T19:10:54Z"
        },
        "latency_flags": [
          "spot: realtime feed aktív",
          "k1m: utolsó zárt gyertya 9 perc késésben van",
          "k1m: jelzés korlátozva 9 perc késés miatt",
          "k5m: utolsó zárt gyertya 11 perc késésben van"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
          "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, USDJPY, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "k1m: jelzés korlátozva — 9 perc késés",
        "Realtime spot feed override"
      ]
    },
    "GOLD_CFD": {
      "asset": "GOLD_CFD",
      "ok": false,
      "retrieved_at_utc": "2025-10-22T19:11:10Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 4090.54,
        "utc": "2025-10-22T19:05:21Z",
        "retrieved_at_utc": "2025-10-22T19:05:21+00:00"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 20,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": null,
        "within_window": null,
        "weekday_ok": null,
        "status": "unavailable",
        "status_note": "Hiányzó adat"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-22T19:04:00Z",
            "last_closed_utc": "2025-10-22T19:04:00Z",
            "latency_seconds": 430,
            "expected_max_delay_seconds": 180,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 420.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "XAU/USD",
            "used_exchange": null
          },
          "k5m": {
            "last_raw_utc": "2025-10-22T19:00:00Z",
            "last_closed_utc": "2025-10-22T19:00:00Z",
            "latency_seconds": 670,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 1200.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "XAU/USD",
            "used_exchange": null
          },
          "k1h": {
            "last_raw_utc": "2025-10-22T19:00:00Z",
            "last_closed_utc": "2025-10-22T19:00:00Z",
            "latency_seconds": 670,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 9000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "XAU/USD",
            "used_exchange": null
          },
          "k4h": {
            "last_raw_utc": "2025-10-22T16:00:00Z",
            "last_closed_utc": "2025-10-22T16:00:00Z",
            "latency_seconds": 11470,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 36000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "XAU/USD",
            "used_exchange": null
          },
          "spot": {
            "last_raw_utc": "2025-10-22T19:05:21Z",
            "latency_seconds": 349,
            "expected_max_delay_seconds": 900,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "source": "twelvedata:quote",
            "fallback_used": false,
            "realtime_override": true,
            "freshness_limit_seconds": 900.0,
            "freshness_retries": 0,
            "freshness_violation": false,
            "freshness_violation_meta": false,
            "used_symbol": "XAU/USD",
            "used_exchange": null
          }
        },
        "source_files": {
          "spot.json": "2025-10-22T19:10:54Z",
          "klines_1m.json": "2025-10-22T19:10:54Z",
          "klines_5m.json": "2025-10-22T19:10:54Z",
          "klines_1h.json": "2025-10-22T19:10:54Z",
          "klines_4h.json": "2025-10-22T19:10:54Z"
        },
        "latency_flags": [
          "spot: realtime feed aktív",
          "k1m: utolsó zárt gyertya 7 perc késésben van",
          "k1m: jelzés korlátozva 7 perc késés miatt",
          "k5m: utolsó zárt gyertya 11 perc késésben van"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
          "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, USDJPY, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "k1m: jelzés korlátozva — 7 perc késés",
        "Realtime spot feed override"
      ]
    },
    "NVDA": {
      "asset": "NVDA",
      "ok": false,
      "error": "name '_min_of_day' is not defined"
    },
    "SRTY": {
      "asset": "SRTY",
      "ok": true,
      "retrieved_at_utc": "2025-10-22T19:11:11Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 11.56,
        "utc": "2025-10-22T19:07:45Z",
        "retrieved_at_utc": "2025-10-22T19:07:45+00:00",
        "source": "twelvedata:quote",
        "realtime_override": true,
        "fallback_used": false,
        "confidence": 0.2,
        "avg_latency_profile": 2191.2659193840163,
        "realtime_stats": {
          "samples": 3,
          "min_price": 11.56,
          "max_price": 11.56,
          "mean_price": 11.56,
          "latency_avg": 0.0,
          "latency_max": 0.0,
          "latency_median": 0.0,
          "latency_latest": 0.0
        }
      },
      "signal": "no entry",
      "probability": 0,
      "probability_raw": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 3,
      "stale_timeframes": {
        "k1m": false,
        "k5m": false,
        "k1h": false,
        "k4h": false
      },
      "biases": {
        "raw_4h": "short",
        "raw_1h": "neutral",
        "adjusted_4h": "short",
        "adjusted_1h": "neutral"
      },
      "gates": {
        "mode": "momentum",
        "required": [
          "session",
          "regime",
          "bias",
          "momentum_trigger",
          "bos5m",
          "atr",
          "liquidity",
          "rr_math>=1.8",
          "tp_min_profit",
          "min_stoploss",
          "tp1_net>=+110%"
        ],
        "missing": [
          "regime",
          "bias",
          "liquidity",
          "order_flow"
        ]
      },
      "session_info": {
        "open": true,
        "entry_open": true,
        "within_window": true,
        "within_entry_window": true,
        "within_monitor_window": true,
        "weekday_ok": true,
        "now_utc": "2025-10-22T19:11:11.617164+00:00",
        "windows_utc": [
          [
            13,
            30,
            20,
            0
          ]
        ],
        "monitor_windows_utc": [
          [
            13,
            0,
            22,
            0
          ]
        ],
        "time_zone": "Europe/Berlin",
        "windows_local_cet": [
          [
            "15:30",
            "22:00"
          ]
        ],
        "monitor_windows_local_cet": [
          [
            "15:00",
            "00:00"
          ]
        ],
        "status": "open",
        "status_note": "Piac nyitva"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-22T19:07:00Z",
            "last_closed_utc": "2025-10-22T19:07:00Z",
            "latency_seconds": 251,
            "expected_max_delay_seconds": 180,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 420.0,
            "freshness_violation": false,
            "freshness_retries": 1,
            "used_symbol": "SRTY",
            "used_exchange": null
          },
          "k5m": {
            "last_raw_utc": "2025-10-22T19:05:00Z",
            "last_closed_utc": "2025-10-22T19:05:00Z",
            "latency_seconds": 371,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 1200.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "SRTY",
            "used_exchange": null
          },
          "k1h": {
            "last_raw_utc": "2025-10-22T18:30:00Z",
            "last_closed_utc": "2025-10-22T18:30:00Z",
            "latency_seconds": 2471,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 9000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "SRTY",
            "used_exchange": null
          },
          "k4h": {
            "last_raw_utc": "2025-10-22T17:30:00Z",
            "last_closed_utc": "2025-10-22T17:30:00Z",
            "latency_seconds": 6071,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 36000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "SRTY",
            "used_exchange": null
          },
          "spot": {
            "last_raw_utc": "2025-10-22T19:07:45Z",
            "latency_seconds": 206,
            "expected_max_delay_seconds": 600,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "source": "twelvedata:quote",
            "fallback_used": false,
            "realtime_override": true,
            "freshness_limit_seconds": 900.0,
            "freshness_retries": 0,
            "freshness_violation": false,
            "freshness_violation_meta": false,
            "used_symbol": "SRTY",
            "used_exchange": null
          }
        },
        "source_files": {
          "spot.json": "2025-10-22T19:10:54Z",
          "klines_1m.json": "2025-10-22T19:10:54Z",
          "klines_5m.json": "2025-10-22T19:10:54Z",
          "klines_1h.json": "2025-10-22T19:10:54Z",
          "klines_4h.json": "2025-10-22T19:10:54Z"
        },
        "latency_flags": [
          "spot: realtime feed aktív"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
          "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, USDJPY, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
        ]
      },
      "reasons": [
        "Bias neutrálsávban",
        "Regime filter inaktív",
        "ATR nincs rendben (relatív vagy abszolút küszöb)",
        "Order flow neutrális (−4.6)",
        "Realtime megbízhatóság alacsony (−4.8)",
        "Diagnosztika: spot: realtime feed aktív",
        "missing: regime, bias, liquidity, order_flow"
      ],
      "realtime_transport": "http",
      "probability_model": null,
      "probability_model_raw": null,
      "probability_calibrated": null,
      "probability_threshold": null,
      "probability_stack": {
        "asset": "SRTY",
        "unavailable_reason": "sklearn_missing"
      },
      "ema21_slope_1h": 0.01470552893624961,
      "ema21_slope_threshold": 0.035,
      "ema21_relation_1h": "above",
      "last_swing_high_1h": 10.9533,
      "last_swing_low_1h": 11.47,
      "last_close_1h": 11.48,
      "bos_5m_dir": "bos_down",
      "atr1h": 0.18461428571428584,
      "momentum_volume_ratio": 0.49614463932237723,
      "momentum_liquidity_ok": false,
      "dynamic_tp_profile": {
        "core": {
          "tp1": 1.8,
          "tp2": 2.7,
          "rr": 2.2
        },
        "momentum": {
          "tp1": 1.5,
          "tp2": 2.4,
          "rr": 1.8
        },
        "regime": "compressed",
        "reference": {
          "current": 0.045357142857142714,
          "q20": 0.03648182857142839,
          "q50": 0.05464285714285718,
          "q80": 0.07096571428571423
        }
      },
      "order_flow_metrics": {
        "imbalance": 0.05150847342182106,
        "pressure": -0.0006997854976530954,
        "delta_volume": 23443.0,
        "aggressor_ratio": null
      },
      "volatility_overlay": {
        "implied_vol": null,
        "realised_vol": 0.0026804696987973537,
        "realised_window_minutes": 120,
        "regime": "elevated",
        "premium": null,
        "source_path": null,
        "implied_realised_ratio": null
      },
      "invalid_levels": {
        "buy": 11.22,
        "sell": 11.2033
      },
      "invalid_buffer_abs": 0.25,
      "action_plan": {
        "status": "standby",
        "priority": "low",
        "summary": "Nincs belépő – dolgozd le a hiányzó feltételeket.",
        "steps": [],
        "blockers": [
          "Trend filter nem támogatja az irányt.",
          "Nincs egyértelmű bias – várj megerősítésre.",
          "Forgalmi feltételek nem teljesültek – várj nagyobb volumenre.",
          "Order flow nincs összhangban a belépővel."
        ],
        "blockers_raw": [
          "regime",
          "bias",
          "liquidity",
          "order_flow"
        ],
        "notes": [
          "Összesített valószínűség: 0%.",
          "Ajánlott tőkeáttétel: ×3.0.",
          "Bias neutrálsávban",
          "Regime filter inaktív",
          "ATR nincs rendben (relatív vagy abszolút küszöb)",
          "Order flow neutrális (−4.6)",
          "Realtime megbízhatóság alacsony (−4.8)",
          "Diagnosztika: spot: realtime feed aktív"
        ],
        "context": {
          "asset": "SRTY",
          "decision": "no entry",
          "probability": 0,
          "session_open": true,
          "session_entry_open": true,
          "session_status": "open"
        }
      },
      "active_position_meta": {
        "ema21_slope_abs": 0.01470552893624961,
        "ema21_slope_signed": 0.01470552893624961,
        "ema21_slope_threshold": 0.035,
        "ema21_relation": "above",
        "structure_5m": "bos_down",
        "stale_timeframes": {
          "k1m": false,
          "k5m": false,
          "k1h": false,
          "k4h": false
        },
        "atr1h": 0.18461428571428584,
        "atr1h_trail_floor": 0.25,
        "atr5": 0.045357142857142714,
        "atr5_rel": 0.003923628274839335,
        "atr5_threshold": 0.8,
        "bos1h_long": true,
        "bos1h_short": false,
        "regime_ok": false,
        "effective_bias": "neutral",
        "last_close_1h": 11.48,
        "last_swing_high_1h": 10.9533,
        "last_swing_low_1h": 11.47,
        "invalid_level_sell": 11.2033,
        "invalid_level_buy": 11.22,
        "invalid_buffer_abs": 0.25,
        "p_score": 0,
        "probability_calibrated": null,
        "probability_threshold": null,
        "probability_model_raw": null,
        "tp_profile": {
          "tp1_r": 1.8,
          "tp2_r": 2.7
        },
        "realtime_confidence": 0.2,
        "avg_latency_profile": 2191.2659193840163,
        "realtime_stats": {
          "samples": 3,
          "min_price": 11.56,
          "max_price": 11.56,
          "mean_price": 11.56,
          "latency_avg": 0.0,
          "latency_max": 0.0,
          "latency_median": 0.0,
          "latency_latest": 0.0
        },
        "action_plan": {
          "status": "standby",
          "priority": "low",
          "summary": "Nincs belépő – dolgozd le a hiányzó feltételeket.",
          "steps": [],
          "blockers": [
            "Trend filter nem támogatja az irányt.",
            "Nincs egyértelmű bias – várj megerősítésre.",
            "Forgalmi feltételek nem teljesültek – várj nagyobb volumenre.",
            "Order flow nincs összhangban a belépővel."
          ],
          "blockers_raw": [
            "regime",
            "bias",
            "liquidity",
            "order_flow"
          ],
          "notes": [
            "Összesített valószínűség: 0%.",
            "Ajánlott tőkeáttétel: ×3.0.",
            "Bias neutrálsávban",
            "Regime filter inaktív",
            "ATR nincs rendben (relatív vagy abszolút küszöb)",
            "Order flow neutrális (−4.6)",
            "Realtime megbízhatóság alacsony (−4.8)",
            "Diagnosztika: spot: realtime feed aktív"
          ],
          "context": {
            "asset": "SRTY",
            "decision": "no entry",
            "probability": 0,
            "session_open": true,
            "session_entry_open": true,
            "session_status": "open"
          }
        }
      }
    },
    "USDJPY": {
      "asset": "USDJPY",
      "ok": false,
      "retrieved_at_utc": "2025-10-22T19:11:12Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 151.854,
        "utc": "2025-10-22T19:04:51Z",
        "retrieved_at_utc": "2025-10-22T19:04:51+00:00"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 30,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": null,
        "within_window": null,
        "weekday_ok": null,
        "status": "unavailable",
        "status_note": "Hiányzó adat"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-22T19:03:00Z",
            "last_closed_utc": "2025-10-22T19:03:00Z",
            "latency_seconds": 492,
            "expected_max_delay_seconds": 180,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 420.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "USD/JPY",
            "used_exchange": "FX"
          },
          "k5m": {
            "last_raw_utc": "2025-10-22T19:00:00Z",
            "last_closed_utc": "2025-10-22T19:00:00Z",
            "latency_seconds": 672,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 1200.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "USD/JPY",
            "used_exchange": "FX"
          },
          "k1h": {
            "last_raw_utc": "2025-10-22T19:00:00Z",
            "last_closed_utc": "2025-10-22T19:00:00Z",
            "latency_seconds": 672,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 9000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "USD/JPY",
            "used_exchange": "FX"
          },
          "k4h": {
            "last_raw_utc": "2025-10-22T16:00:00Z",
            "last_closed_utc": "2025-10-22T16:00:00Z",
            "latency_seconds": 11472,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 36000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "USD/JPY",
            "used_exchange": "FX"
          },
          "spot": {
            "last_raw_utc": "2025-10-22T19:04:51Z",
            "latency_seconds": 381,
            "expected_max_delay_seconds": 900,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "source": "twelvedata:quote",
            "fallback_used": false,
            "realtime_override": true,
            "freshness_limit_seconds": 900.0,
            "freshness_retries": 0,
            "freshness_violation": false,
            "freshness_violation_meta": false,
            "used_symbol": "USD/JPY",
            "used_exchange": "FX"
          }
        },
        "source_files": {
          "spot.json": "2025-10-22T19:10:54Z",
          "klines_1m.json": "2025-10-22T19:10:54Z",
          "klines_5m.json": "2025-10-22T19:10:54Z",
          "klines_1h.json": "2025-10-22T19:10:54Z",
          "klines_4h.json": "2025-10-22T19:10:54Z"
        },
        "latency_flags": [
          "spot: realtime feed aktív",
          "k1m: utolsó zárt gyertya 8 perc késésben van",
          "k1m: jelzés korlátozva 8 perc késés miatt",
          "k5m: utolsó zárt gyertya 11 perc késésben van"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
          "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, USDJPY, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "k1m: jelzés korlátozva — 8 perc késés",
        "Realtime spot feed override"
      ]
    },
    "USOIL": {
      "asset": "USOIL",
      "ok": false,
      "retrieved_at_utc": "2025-10-22T19:11:12Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 58.55,
        "utc": "2025-10-22T19:05:52Z",
        "retrieved_at_utc": "2025-10-22T19:05:52+00:00"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 20,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": null,
        "within_window": null,
        "weekday_ok": null,
        "status": "unavailable",
        "status_note": "Hiányzó adat"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-22T19:00:00Z",
            "last_closed_utc": "2025-10-22T19:00:00Z",
            "latency_seconds": 672,
            "expected_max_delay_seconds": 180,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 420.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "WTI/USD",
            "used_exchange": null
          },
          "k5m": {
            "last_raw_utc": "2025-10-22T19:00:00Z",
            "last_closed_utc": "2025-10-22T19:00:00Z",
            "latency_seconds": 672,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 1200.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "WTI/USD",
            "used_exchange": null
          },
          "k1h": {
            "last_raw_utc": "2025-10-22T19:00:00Z",
            "last_closed_utc": "2025-10-22T19:00:00Z",
            "latency_seconds": 672,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 9000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "WTI/USD",
            "used_exchange": null
          },
          "k4h": {
            "last_raw_utc": "2025-10-22T16:00:00Z",
            "last_closed_utc": "2025-10-22T16:00:00Z",
            "latency_seconds": 11472,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 36000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "WTI/USD",
            "used_exchange": null
          },
          "spot": {
            "last_raw_utc": "2025-10-22T19:05:52Z",
            "latency_seconds": 320,
            "expected_max_delay_seconds": 900,
            "source_mtime_utc": "2025-10-22T19:10:54Z",
            "source": "twelvedata:quote",
            "fallback_used": false,
            "realtime_override": true,
            "freshness_limit_seconds": 900.0,
            "freshness_retries": 0,
            "freshness_violation": false,
            "freshness_violation_meta": false,
            "used_symbol": "WTI/USD",
            "used_exchange": null
          }
        },
        "source_files": {
          "spot.json": "2025-10-22T19:10:54Z",
          "klines_1m.json": "2025-10-22T19:10:54Z",
          "klines_5m.json": "2025-10-22T19:10:54Z",
          "klines_1h.json": "2025-10-22T19:10:54Z",
          "klines_4h.json": "2025-10-22T19:10:54Z"
        },
        "latency_flags": [
          "spot: realtime feed aktív",
          "k1m: utolsó zárt gyertya 11 perc késésben van",
          "k1m: jelzés korlátozva 11 perc késés miatt",
          "k5m: utolsó zárt gyertya 11 perc késésben van"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
          "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, USDJPY, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "k1m: jelzés korlátozva — 11 perc késés",
        "Realtime spot feed override"
      ]
    }
  },
  "latency_flags": [
    "spot: realtime feed aktív",
    "k1m: utolsó zárt gyertya 9 perc késésben van",
    "k1m: jelzés korlátozva 9 perc késés miatt",
    "k5m: utolsó zárt gyertya 11 perc késésben van",
    "spot: realtime feed aktív",
    "k1m: utolsó zárt gyertya 7 perc késésben van",
    "k1m: jelzés korlátozva 7 perc késés miatt",
    "k5m: utolsó zárt gyertya 11 perc késésben van",
    "spot: realtime feed aktív",
    "spot: realtime feed aktív",
    "k1m: utolsó zárt gyertya 8 perc késésben van",
    "k1m: jelzés korlátozva 8 perc késés miatt",
    "k5m: utolsó zárt gyertya 11 perc késésben van",
    "spot: realtime feed aktív",
    "k1m: utolsó zárt gyertya 11 perc késésben van",
    "k1m: jelzés korlátozva 11 perc késés miatt",
    "k5m: utolsó zárt gyertya 11 perc késésben van"
  ],
  "troubleshooting": [
    "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
    "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
    "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
    "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
    "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
    "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, USDJPY, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához.",
    "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, USDJPY, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
  ],
  "pipeline_monitoring": {
    "trading": {
      "started_utc": "2025-10-22T19:03:52Z",
      "completed_utc": "2025-10-22T19:10:34Z",
      "duration_seconds": 402.525
    },
    "updated_utc": "2025-10-22T19:11:09Z",
    "analysis": {
      "started_utc": "2025-10-22T19:11:09Z",
      "lag_from_trading_seconds": 35.082,
      "lag_threshold_seconds": 240,
      "lag_breached": false
    }
  },
  "ml_models_missing": {
    "EURUSD": "public/models/EURUSD_gbm.pkl",
    "GOLD_CFD": "public/models/GOLD_CFD_gbm.pkl",
    "NVDA": "public/models/NVDA_gbm.pkl",
    "SRTY": "public/models/SRTY_gbm.pkl",
    "USDJPY": "public/models/USDJPY_gbm.pkl",
    "USOIL": "public/models/USOIL_gbm.pkl"
  }
}