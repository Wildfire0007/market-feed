{
  "ok": true,
  "generated_utc": "2025-10-25T19:42:51Z",
  "analysis_started_utc": "2025-10-25T19:42:51Z",
  "assets": {
    "EURUSD": {
      "asset": "EURUSD",
      "ok": false,
      "retrieved_at_utc": "2025-10-25T19:42:51Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 1.16246,
        "utc": "2025-10-25T19:39:56+00:00",
        "retrieved_at_utc": "2025-10-25T19:39:56+00:00"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 30,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": false,
        "entry_open": false,
        "within_window": true,
        "within_entry_window": true,
        "within_monitor_window": true,
        "weekday_ok": false,
        "now_utc": "2025-10-25T19:42:51.764089+00:00",
        "windows_utc": [
          [
            0,
            0,
            23,
            59
          ]
        ],
        "time_zone": "Europe/Berlin",
        "windows_local_cet": [
          [
            "02:00",
            "01:59"
          ]
        ],
        "allowed_weekdays": [
          0,
          1,
          2,
          3,
          4,
          6
        ],
        "status": "closed_weekend",
        "status_note": "Piac zárva (hétvége)",
        "next_open_utc": "2025-10-26T00:00:00+00:00"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-24T21:44:00Z",
            "last_closed_utc": "2025-10-24T21:44:00Z",
            "latency_seconds": 79131,
            "expected_max_delay_seconds": 180,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 420.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "EUR/USD",
            "used_exchange": "FX"
          },
          "k5m": {
            "last_raw_utc": "2025-10-24T21:40:00Z",
            "last_closed_utc": "2025-10-24T21:40:00Z",
            "latency_seconds": 79371,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 1200.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "EUR/USD",
            "used_exchange": "FX"
          },
          "k1h": {
            "last_raw_utc": "2025-10-24T21:00:00Z",
            "last_closed_utc": "2025-10-24T21:00:00Z",
            "latency_seconds": 81771,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 9000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "EUR/USD",
            "used_exchange": "FX"
          },
          "k4h": {
            "last_raw_utc": "2025-10-24T20:00:00Z",
            "last_closed_utc": "2025-10-24T20:00:00Z",
            "latency_seconds": 85371,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 36000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "EUR/USD",
            "used_exchange": "FX"
          },
          "spot": {
            "last_raw_utc": "2025-10-25T19:39:56Z",
            "latency_seconds": 175,
            "expected_max_delay_seconds": 900,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "source": "twelvedata:quote",
            "fallback_used": false,
            "realtime_override": false,
            "freshness_limit_seconds": 900.0,
            "freshness_retries": 0,
            "freshness_violation": false,
            "freshness_violation_meta": false,
            "used_symbol": "EUR/USD",
            "used_exchange": "FX"
          }
        },
        "source_files": {
          "spot.json": "2025-10-25T19:42:34Z",
          "klines_1m.json": "2025-10-25T19:42:34Z",
          "klines_5m.json": "2025-10-25T19:42:34Z",
          "klines_1h.json": "2025-10-25T19:42:34Z",
          "klines_4h.json": "2025-10-25T19:42:34Z"
        },
        "latency_flags": [
          "k1m: utolsó zárt gyertya 1318 perc késésben van",
          "k1m: jelzés korlátozva 1318 perc késés miatt",
          "k5m: utolsó zárt gyertya 1322 perc késésben van",
          "k5m: jelzés korlátozva 1322 perc késés miatt",
          "k1h: utolsó zárt gyertya 1362 perc késésben van",
          "k1h: jelzés korlátozva 1362 perc késés miatt",
          "k4h: utolsó zárt gyertya 1422 perc késésben van",
          "k4h: jelzés korlátozva 1422 perc késés miatt"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
          "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, BTCUSD, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "k1m: jelzés korlátozva — 1318 perc késés",
        "k5m: jelzés korlátozva — 1322 perc késés",
        "k1h: jelzés korlátozva — 1362 perc késés",
        "k4h: jelzés korlátozva — 1422 perc késés"
      ]
    },
    "GOLD_CFD": {
      "asset": "GOLD_CFD",
      "ok": false,
      "retrieved_at_utc": "2025-10-25T19:42:52Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 4111.21,
        "utc": "2025-10-25T19:39:56+00:00",
        "retrieved_at_utc": "2025-10-25T19:39:56+00:00"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 20,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": false,
        "entry_open": false,
        "within_window": true,
        "within_entry_window": true,
        "within_monitor_window": true,
        "weekday_ok": false,
        "now_utc": "2025-10-25T19:42:52.087647+00:00",
        "windows_utc": [
          [
            0,
            0,
            23,
            59
          ]
        ],
        "time_zone": "Europe/Berlin",
        "windows_local_cet": [
          [
            "02:00",
            "01:59"
          ]
        ],
        "allowed_weekdays": [
          0,
          1,
          2,
          3,
          4,
          6
        ],
        "status": "closed_weekend",
        "status_note": "Piac zárva (hétvége)",
        "next_open_utc": "2025-10-26T00:00:00+00:00"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-25T12:54:00Z",
            "last_closed_utc": "2025-10-25T12:54:00Z",
            "latency_seconds": 24532,
            "expected_max_delay_seconds": 180,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 420.0,
            "freshness_violation": false,
            "freshness_retries": 1,
            "used_symbol": "XAU/USD",
            "used_exchange": null
          },
          "k5m": {
            "last_raw_utc": "2025-10-25T12:55:00Z",
            "last_closed_utc": "2025-10-25T12:55:00Z",
            "latency_seconds": 24472,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 1200.0,
            "freshness_violation": false,
            "freshness_retries": 1,
            "used_symbol": "XAU/USD",
            "used_exchange": null
          },
          "k1h": {
            "last_raw_utc": "2025-10-25T12:00:00Z",
            "last_closed_utc": "2025-10-25T12:00:00Z",
            "latency_seconds": 27772,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 9000.0,
            "freshness_violation": false,
            "freshness_retries": 1,
            "used_symbol": "XAU/USD",
            "used_exchange": null
          },
          "k4h": {
            "last_raw_utc": "2025-10-25T12:00:00Z",
            "last_closed_utc": "2025-10-25T12:00:00Z",
            "latency_seconds": 27772,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 36000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "XAU/USD",
            "used_exchange": null
          },
          "spot": {
            "last_raw_utc": "2025-10-25T19:39:56Z",
            "latency_seconds": 176,
            "expected_max_delay_seconds": 900,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "source": "twelvedata:quote",
            "fallback_used": false,
            "realtime_override": false,
            "freshness_limit_seconds": 900.0,
            "freshness_retries": 0,
            "freshness_violation": false,
            "freshness_violation_meta": false,
            "used_symbol": "XAU/USD",
            "used_exchange": null
          }
        },
        "source_files": {
          "spot.json": "2025-10-25T19:42:34Z",
          "klines_1m.json": "2025-10-25T19:42:34Z",
          "klines_5m.json": "2025-10-25T19:42:34Z",
          "klines_1h.json": "2025-10-25T19:42:34Z",
          "klines_4h.json": "2025-10-25T19:42:34Z"
        },
        "latency_flags": [
          "k1m: utolsó zárt gyertya 408 perc késésben van",
          "k1m: jelzés korlátozva 408 perc késés miatt",
          "k5m: utolsó zárt gyertya 407 perc késésben van",
          "k5m: jelzés korlátozva 407 perc késés miatt",
          "k1h: utolsó zárt gyertya 462 perc késésben van",
          "k1h: jelzés korlátozva 462 perc késés miatt",
          "k4h: utolsó zárt gyertya 462 perc késésben van"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
          "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, BTCUSD, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "k1m: jelzés korlátozva — 408 perc késés",
        "k5m: jelzés korlátozva — 407 perc késés",
        "k1h: jelzés korlátozva — 462 perc késés"
      ]
    },
    "NVDA": {
      "asset": "NVDA",
      "ok": false,
      "retrieved_at_utc": "2025-10-25T19:42:52Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 186.25999,
        "utc": "2025-10-25T19:39:56+00:00",
        "retrieved_at_utc": "2025-10-25T19:39:56+00:00"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 5,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": false,
        "entry_open": false,
        "within_window": true,
        "within_entry_window": true,
        "within_monitor_window": true,
        "weekday_ok": false,
        "now_utc": "2025-10-25T19:42:52.409486+00:00",
        "windows_utc": [
          [
            13,
            30,
            20,
            0
          ]
        ],
        "monitor_windows_utc": [
          [
            0,
            5,
            7,
            55
          ],
          [
            8,
            5,
            20,
            0
          ]
        ],
        "time_zone": "Europe/Berlin",
        "windows_local_cet": [
          [
            "15:30",
            "22:00"
          ]
        ],
        "monitor_windows_local_cet": [
          [
            "02:05",
            "09:55"
          ],
          [
            "10:05",
            "22:00"
          ]
        ],
        "allowed_weekdays": [
          0,
          1,
          2,
          3,
          4
        ],
        "status": "closed_weekend",
        "status_note": "Piac zárva (hétvége)",
        "next_open_utc": "2025-10-27T13:30:00+00:00"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-24T19:59:00Z",
            "last_closed_utc": "2025-10-24T19:59:00Z",
            "latency_seconds": 85432,
            "expected_max_delay_seconds": 180,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 420.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "NVDA",
            "used_exchange": "NASDAQ"
          },
          "k5m": {
            "last_raw_utc": "2025-10-24T19:55:00Z",
            "last_closed_utc": "2025-10-24T19:55:00Z",
            "latency_seconds": 85672,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 1200.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "NVDA",
            "used_exchange": "NASDAQ"
          },
          "k1h": {
            "last_raw_utc": "2025-10-24T19:30:00Z",
            "last_closed_utc": "2025-10-24T19:30:00Z",
            "latency_seconds": 87172,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 9000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "NVDA",
            "used_exchange": "NASDAQ"
          },
          "k4h": {
            "last_raw_utc": "2025-10-24T17:30:00Z",
            "last_closed_utc": "2025-10-24T17:30:00Z",
            "latency_seconds": 94372,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 36000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "NVDA",
            "used_exchange": "NASDAQ"
          },
          "spot": {
            "last_raw_utc": "2025-10-25T19:39:56Z",
            "latency_seconds": 176,
            "expected_max_delay_seconds": 600,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "source": "twelvedata:quote",
            "fallback_used": false,
            "realtime_override": false,
            "freshness_limit_seconds": 900.0,
            "freshness_retries": 0,
            "freshness_violation": false,
            "freshness_violation_meta": false,
            "used_symbol": "NVDA",
            "used_exchange": "NASDAQ"
          }
        },
        "source_files": {
          "spot.json": "2025-10-25T19:42:34Z",
          "klines_1m.json": "2025-10-25T19:42:34Z",
          "klines_5m.json": "2025-10-25T19:42:34Z",
          "klines_1h.json": "2025-10-25T19:42:34Z",
          "klines_4h.json": "2025-10-25T19:42:34Z"
        },
        "latency_flags": [
          "k1m: utolsó zárt gyertya 1423 perc késésben van",
          "k1m: jelzés korlátozva 1423 perc késés miatt",
          "k5m: utolsó zárt gyertya 1427 perc késésben van",
          "k5m: jelzés korlátozva 1427 perc késés miatt",
          "k1h: utolsó zárt gyertya 1452 perc késésben van",
          "k1h: jelzés korlátozva 1452 perc késés miatt",
          "k4h: utolsó zárt gyertya 1572 perc késésben van",
          "k4h: jelzés korlátozva 1572 perc késés miatt"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
          "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, BTCUSD, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "k1m: jelzés korlátozva — 1423 perc késés",
        "k5m: jelzés korlátozva — 1427 perc késés",
        "k1h: jelzés korlátozva — 1452 perc késés",
        "k4h: jelzés korlátozva — 1572 perc késés"
      ]
    },
    "SRTY": {
      "asset": "SRTY",
      "ok": false,
      "retrieved_at_utc": "2025-10-25T19:42:52Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 10.61,
        "utc": "2025-10-25T19:40:33+00:00",
        "retrieved_at_utc": "2025-10-25T19:40:33+00:00"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 3,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": false,
        "entry_open": false,
        "within_window": true,
        "within_entry_window": true,
        "within_monitor_window": true,
        "weekday_ok": false,
        "now_utc": "2025-10-25T19:42:52.729609+00:00",
        "windows_utc": [
          [
            13,
            30,
            20,
            0
          ]
        ],
        "monitor_windows_utc": [
          [
            0,
            5,
            7,
            55
          ],
          [
            8,
            5,
            20,
            0
          ]
        ],
        "time_zone": "Europe/Berlin",
        "windows_local_cet": [
          [
            "15:30",
            "22:00"
          ]
        ],
        "monitor_windows_local_cet": [
          [
            "02:05",
            "09:55"
          ],
          [
            "10:05",
            "22:00"
          ]
        ],
        "allowed_weekdays": [
          0,
          1,
          2,
          3,
          4
        ],
        "status": "closed_weekend",
        "status_note": "Piac zárva (hétvége)",
        "next_open_utc": "2025-10-27T13:30:00+00:00"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-24T19:59:00Z",
            "last_closed_utc": "2025-10-24T19:59:00Z",
            "latency_seconds": 85432,
            "expected_max_delay_seconds": 180,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 420.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "SRTY",
            "used_exchange": null
          },
          "k5m": {
            "last_raw_utc": "2025-10-24T19:55:00Z",
            "last_closed_utc": "2025-10-24T19:55:00Z",
            "latency_seconds": 85672,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 1200.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "SRTY",
            "used_exchange": null
          },
          "k1h": {
            "last_raw_utc": "2025-10-24T19:30:00Z",
            "last_closed_utc": "2025-10-24T19:30:00Z",
            "latency_seconds": 87172,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 9000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "SRTY",
            "used_exchange": null
          },
          "k4h": {
            "last_raw_utc": "2025-10-24T17:30:00Z",
            "last_closed_utc": "2025-10-24T17:30:00Z",
            "latency_seconds": 94372,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 36000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "SRTY",
            "used_exchange": null
          },
          "spot": {
            "last_raw_utc": "2025-10-25T19:40:33Z",
            "latency_seconds": 139,
            "expected_max_delay_seconds": 600,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "source": "twelvedata:quote",
            "fallback_used": false,
            "realtime_override": false,
            "freshness_limit_seconds": 900.0,
            "freshness_retries": 0,
            "freshness_violation": false,
            "freshness_violation_meta": false,
            "used_symbol": "SRTY",
            "used_exchange": null,
            "realtime_forced": true,
            "realtime_force_reason": "spot_error"
          }
        },
        "source_files": {
          "spot.json": "2025-10-25T19:42:34Z",
          "klines_1m.json": "2025-10-25T19:42:34Z",
          "klines_5m.json": "2025-10-25T19:42:34Z",
          "klines_1h.json": "2025-10-25T19:42:34Z",
          "klines_4h.json": "2025-10-25T19:42:34Z"
        },
        "latency_flags": [
          "spot: realtime mintavétel kényszerítve (spot_error)",
          "k1m: utolsó zárt gyertya 1423 perc késésben van",
          "k1m: jelzés korlátozva 1423 perc késés miatt",
          "k5m: utolsó zárt gyertya 1427 perc késésben van",
          "k5m: jelzés korlátozva 1427 perc késés miatt",
          "k1h: utolsó zárt gyertya 1452 perc késésben van",
          "k1h: jelzés korlátozva 1452 perc késés miatt",
          "k4h: utolsó zárt gyertya 1572 perc késésben van",
          "k4h: jelzés korlátozva 1572 perc késés miatt"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
          "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, BTCUSD, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "k1m: jelzés korlátozva — 1423 perc késés",
        "k5m: jelzés korlátozva — 1427 perc késés",
        "k1h: jelzés korlátozva — 1452 perc késés",
        "k4h: jelzés korlátozva — 1572 perc késés"
      ]
    },
    "BTCUSD": {
      "asset": "BTCUSD",
      "ok": true,
      "retrieved_at_utc": "2025-10-25T19:42:53Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 111466.2,
        "utc": "2025-10-25T19:40:11+00:00",
        "retrieved_at_utc": "2025-10-25T19:40:11+00:00",
        "source": "twelvedata:quote",
        "realtime_override": false,
        "fallback_used": false,
        "confidence": 0.8543227109788731,
        "avg_latency_profile": 138.40027917857745,
        "realtime_stats": {
          "samples": 1,
          "min_price": 111511.51,
          "max_price": 111511.51,
          "mean_price": 111511.51,
          "latency_avg": 0.0,
          "latency_max": 0.0,
          "latency_median": 0.0,
          "latency_latest": 0.0
        }
      },
      "signal": "no entry",
      "probability": 14,
      "probability_raw": 21,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 2,
      "stale_timeframes": {
        "k1m": false,
        "k5m": false,
        "k1h": false,
        "k4h": false
      },
      "biases": {
        "raw_4h": "neutral",
        "raw_1h": "long",
        "adjusted_4h": "neutral",
        "adjusted_1h": "long"
      },
      "gates": {
        "mode": "core",
        "required": [
          "session",
          "regime",
          "bias",
          "bos5m",
          "liquidity(fib zone)",
          "intraday_range_guard",
          "atr",
          "rr_math>=2.1",
          "tp_min_profit",
          "min_stoploss",
          "tp1_net>=+115%"
        ],
        "missing": [
          "regime",
          "bias",
          "bos5m",
          "atr",
          "P_score>=60"
        ]
      },
      "session_info": {
        "open": true,
        "entry_open": true,
        "within_window": true,
        "within_entry_window": true,
        "within_monitor_window": true,
        "weekday_ok": true,
        "now_utc": "2025-10-25T19:42:53.058014+00:00",
        "windows_utc": [
          [
            0,
            0,
            23,
            59
          ]
        ],
        "time_zone": "Europe/Berlin",
        "windows_local_cet": [
          [
            "02:00",
            "01:59"
          ]
        ],
        "status": "open",
        "status_note": "Piac nyitva"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-25T19:40:00Z",
            "last_closed_utc": "2025-10-25T19:40:00Z",
            "latency_seconds": 173,
            "expected_max_delay_seconds": 180,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 420.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "BTC/USD",
            "used_exchange": "Binance"
          },
          "k5m": {
            "last_raw_utc": "2025-10-25T19:40:00Z",
            "last_closed_utc": "2025-10-25T19:40:00Z",
            "latency_seconds": 173,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 1200.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "BTC/USD",
            "used_exchange": "Binance"
          },
          "k1h": {
            "last_raw_utc": "2025-10-25T19:00:00Z",
            "last_closed_utc": "2025-10-25T19:00:00Z",
            "latency_seconds": 2573,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 9000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "BTC/USD",
            "used_exchange": "Binance"
          },
          "k4h": {
            "last_raw_utc": "2025-10-25T12:00:00Z",
            "last_closed_utc": "2025-10-25T12:00:00Z",
            "latency_seconds": 27773,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": false,
            "freshness_limit_seconds": 36000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "BTC/USD",
            "used_exchange": null
          },
          "spot": {
            "last_raw_utc": "2025-10-25T19:40:11Z",
            "latency_seconds": 162,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "source": "twelvedata:quote",
            "fallback_used": false,
            "realtime_override": false,
            "freshness_limit_seconds": 900.0,
            "freshness_retries": 0,
            "freshness_violation": false,
            "freshness_violation_meta": false,
            "used_symbol": "BTC/USD",
            "used_exchange": null,
            "realtime_forced": true,
            "realtime_force_reason": "spot_error"
          }
        },
        "source_files": {
          "spot.json": "2025-10-25T19:42:34Z",
          "klines_1m.json": "2025-10-25T19:42:34Z",
          "klines_5m.json": "2025-10-25T19:42:34Z",
          "klines_1h.json": "2025-10-25T19:42:34Z",
          "klines_4h.json": "2025-10-25T19:42:34Z"
        },
        "latency_flags": [
          "spot: realtime mintavétel kényszerítve (spot_error)",
          "k4h: utolsó zárt gyertya 462 perc késésben van"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
          "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, BTCUSD, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
        ]
      },
      "reasons": [
        "Bias neutrálsávban",
        "Regime filter inaktív",
        "ATR nincs rendben (relatív vagy abszolút küszöb)",
        "Alacsony realised vol → magasabb RR igény",
        "Fib zóna konfluencia (0.618–0.886) (+18.0)",
        "Diagnosztika: spot: realtime mintavétel kényszerítve (spot_error)",
        "Diagnosztika: k4h: utolsó zárt gyertya 462 perc késésben van",
        "Pozíciómenedzsment: short kitettség gyenge trendben → méretcsökkentés vagy zárás mérlegelendő (aktív short pozíció, nyitva: 2025-10-17 12:59 helyi idő; 1h ATR ≈ 302.0)",
        "ML fallback: scikit-learn hiányzik — heurisztikus pontozás aktív",
        "missing: regime, bias, bos5m, atr, P_score>=60"
      ],
      "realtime_transport": "http",
      "probability_model_source": "fallback",
      "probability_fallback": {
        "base_probability": 0.21,
        "adjusted_logit": -3.008696304710307,
        "probability": 0.04703454580091628,
        "threshold": 0.6,
        "steps": [
          {
            "feature": "bias_neutral_penalty",
            "weight": -0.55,
            "normalized": 1.0,
            "delta": -0.55
          },
          {
            "feature": "rel_atr",
            "weight": 0.35,
            "normalized": 0.09540985774803906,
            "delta": 0.03339345021181367
          },
          {
            "feature": "momentum_vol_ratio",
            "weight": 0.35,
            "normalized": -1.0,
            "delta": -0.35
          },
          {
            "feature": "news_event_severity",
            "weight": 0.25,
            "normalized": -0.5,
            "delta": -0.125
          },
          {
            "feature": "realtime_confidence",
            "weight": 0.9,
            "normalized": 0.38148406646830973,
            "delta": 0.3433356598214788
          },
          {
            "feature": "precision_score",
            "weight": 0.35,
            "normalized": -1.2,
            "delta": -0.42
          },
          {
            "feature": "precision_trigger_confidence",
            "weight": 0.55,
            "normalized": -0.77,
            "delta": -0.42350000000000004
          },
          {
            "feature": "momentum_trail_lock_ratio",
            "weight": 0.4,
            "normalized": -0.48,
            "delta": -0.192
          }
        ],
        "reason": "sklearn_missing"
      },
      "probability_model": 0.04703454580091628,
      "probability_model_raw": 0.21,
      "probability_calibrated": 0.04703454580091628,
      "probability_threshold": 0.6,
      "probability_stack": {
        "asset": "BTCUSD",
        "unavailable_reason": "sklearn_missing",
        "source": "fallback",
        "fallback": {
          "base_probability": 0.21,
          "adjusted_logit": -3.008696304710307,
          "probability": 0.04703454580091628,
          "threshold": 0.6,
          "steps": [
            {
              "feature": "bias_neutral_penalty",
              "weight": -0.55,
              "normalized": 1.0,
              "delta": -0.55
            },
            {
              "feature": "rel_atr",
              "weight": 0.35,
              "normalized": 0.09540985774803906,
              "delta": 0.03339345021181367
            },
            {
              "feature": "momentum_vol_ratio",
              "weight": 0.35,
              "normalized": -1.0,
              "delta": -0.35
            },
            {
              "feature": "news_event_severity",
              "weight": 0.25,
              "normalized": -0.5,
              "delta": -0.125
            },
            {
              "feature": "realtime_confidence",
              "weight": 0.9,
              "normalized": 0.38148406646830973,
              "delta": 0.3433356598214788
            },
            {
              "feature": "precision_score",
              "weight": 0.35,
              "normalized": -1.2,
              "delta": -0.42
            },
            {
              "feature": "precision_trigger_confidence",
              "weight": 0.55,
              "normalized": -0.77,
              "delta": -0.42350000000000004
            },
            {
              "feature": "momentum_trail_lock_ratio",
              "weight": 0.4,
              "normalized": -0.48,
              "delta": -0.192
            }
          ],
          "reason": "sklearn_missing"
        }
      },
      "ema21_slope_1h": 0.0037221370949862276,
      "ema21_slope_threshold": 0.03,
      "ema21_relation_1h": "above",
      "last_swing_high_1h": 111479.99,
      "last_swing_low_1h": 111530.38,
      "last_close_1h": 111651.8,
      "bos_5m_dir": "range",
      "atr1h": 302.0135714285747,
      "momentum_volume_ratio": null,
      "momentum_liquidity_ok": true,
      "dynamic_tp_profile": {
        "core": {
          "tp1": 1.8,
          "tp2": 2.7,
          "rr": 2.1
        },
        "momentum": {
          "tp1": 1.5,
          "tp2": 2.4,
          "rr": 1.6800000000000002
        },
        "regime": "compressed",
        "reference": {
          "current": 65.85642857142895,
          "q20": 59.86885714285932,
          "q50": 74.86285714285934,
          "q80": 98.85357142856957
        }
      },
      "order_flow_metrics": {
        "imbalance": null,
        "pressure": 0.0,
        "delta_volume": 0.0,
        "aggressor_ratio": null
      },
      "intraday_profile": {
        "asset": "BTCUSD",
        "timestamp": "2025-10-25T19:42:53Z",
        "day_start_utc": "2025-10-24T22:00:00Z",
        "day_open": 111596.01,
        "day_high": 111731.78,
        "day_low": 111164.39,
        "day_range": 567.3899999999994,
        "range_vs_atr": 8.615559821689981,
        "range_position": 0.5319268933185252,
        "range_bias": "balanced",
        "range_state": "expansion",
        "range_compression": false,
        "range_expansion": true,
        "range_exhaustion_long": false,
        "range_exhaustion_short": false,
        "range_guard": {
          "long": false,
          "short": false
        },
        "opening_range_high": null,
        "opening_range_low": null,
        "opening_break": "none",
        "opening_range_minutes": 45,
        "opening_drive_ratio": null,
        "price_reference": 111466.2,
        "elapsed_minutes": 1302,
        "notes": [
          "Range expanzió >1.5×ATR — agresszív menedzsment indokolt."
        ]
      },
      "entry_thresholds": {
        "profile": "baseline",
        "atr_multiplier": 1.0,
        "atr_threshold_base": 40.0,
        "atr_threshold_initial": 40.0,
        "atr_threshold_effective": 40.0,
        "p_score_min_base": 60.0,
        "p_score_min_effective": 60.0
      },
      "volatility_overlay": {
        "implied_vol": null,
        "realised_vol": 0.00019935377961900983,
        "realised_window_minutes": 120,
        "regime": "suppressed",
        "premium": null,
        "source_path": null,
        "implied_realised_ratio": null
      },
      "invalid_levels": {
        "buy": 111379.37321428572,
        "sell": 111630.99678571429
      },
      "invalid_buffer_abs": 151.00678571428736,
      "position_management": "Pozíciómenedzsment: short kitettség gyenge trendben → méretcsökkentés vagy zárás mérlegelendő (aktív short pozíció, nyitva: 2025-10-17 12:59 helyi idő; 1h ATR ≈ 302.0)",
      "action_plan": {
        "status": "standby",
        "priority": "low",
        "summary": "Nincs belépő – dolgozd le a hiányzó feltételeket.",
        "steps": [],
        "blockers": [
          "Trend filter nem támogatja az irányt.",
          "Nincs egyértelmű bias – várj megerősítésre.",
          "5m struktúra nem erősíti meg a setupot.",
          "ATR feltétel nem teljesült – volatilitás nem megfelelő.",
          "P_score>=60"
        ],
        "blockers_raw": [
          "regime",
          "bias",
          "bos5m",
          "atr",
          "P_score>=60"
        ],
        "notes": [
          "Range expanzió >1.5×ATR — agresszív menedzsment indokolt.",
          "Összesített valószínűség: 14%.",
          "Ajánlott tőkeáttétel: ×2.0.",
          "Pozíciómenedzsment: short kitettség gyenge trendben → méretcsökkentés vagy zárás mérlegelendő (aktív short pozíció, nyitva: 2025-10-17 12:59 helyi idő; 1h ATR ≈ 302.0)",
          "Bias neutrálsávban",
          "Regime filter inaktív",
          "ATR nincs rendben (relatív vagy abszolút küszöb)",
          "Alacsony realised vol → magasabb RR igény",
          "Fib zóna konfluencia (0.618–0.886) (+18.0)",
          "Diagnosztika: spot: realtime mintavétel kényszerítve (spot_error)"
        ],
        "context": {
          "asset": "BTCUSD",
          "decision": "no entry",
          "probability": 14,
          "session_open": true,
          "session_entry_open": true,
          "session_status": "open",
          "intraday_profile": {
            "range_state": "expansion",
            "range_position": 0.5319268933185252,
            "range_vs_atr": 8.615559821689981,
            "range_guard": {
              "long": false,
              "short": false
            },
            "opening_break": "none"
          }
        }
      },
      "active_position_meta": {
        "ema21_slope_abs": 0.0037221370949862276,
        "ema21_slope_signed": 0.0037221370949862276,
        "ema21_slope_threshold": 0.03,
        "ema21_relation": "above",
        "structure_5m": "range",
        "stale_timeframes": {
          "k1m": false,
          "k5m": false,
          "k1h": false,
          "k4h": false
        },
        "atr1h": 302.0135714285747,
        "atr1h_trail_floor": 151.00678571428736,
        "atr5": 65.85642857142895,
        "atr5_rel": 0.0005908197154960782,
        "atr5_threshold": 40.0,
        "bos1h_long": true,
        "bos1h_short": false,
        "regime_ok": false,
        "effective_bias": "neutral",
        "last_close_1h": 111651.8,
        "last_swing_high_1h": 111479.99,
        "last_swing_low_1h": 111530.38,
        "invalid_level_sell": 111630.99678571429,
        "invalid_level_buy": 111379.37321428572,
        "invalid_buffer_abs": 151.00678571428736,
        "p_score": 21,
        "probability_calibrated": 0.04703454580091628,
        "probability_threshold": 0.6,
        "probability_model_raw": 0.21,
        "probability_model_source": "fallback",
        "tp_profile": {
          "tp1_r": 1.8,
          "tp2_r": 2.7
        },
        "realtime_confidence": 0.8543227109788731,
        "avg_latency_profile": 138.40027917857745,
        "probability_fallback": {
          "base_probability": 0.21,
          "adjusted_logit": -3.008696304710307,
          "probability": 0.04703454580091628,
          "threshold": 0.6,
          "steps": [
            {
              "feature": "bias_neutral_penalty",
              "weight": -0.55,
              "normalized": 1.0,
              "delta": -0.55
            },
            {
              "feature": "rel_atr",
              "weight": 0.35,
              "normalized": 0.09540985774803906,
              "delta": 0.03339345021181367
            },
            {
              "feature": "momentum_vol_ratio",
              "weight": 0.35,
              "normalized": -1.0,
              "delta": -0.35
            },
            {
              "feature": "news_event_severity",
              "weight": 0.25,
              "normalized": -0.5,
              "delta": -0.125
            },
            {
              "feature": "realtime_confidence",
              "weight": 0.9,
              "normalized": 0.38148406646830973,
              "delta": 0.3433356598214788
            },
            {
              "feature": "precision_score",
              "weight": 0.35,
              "normalized": -1.2,
              "delta": -0.42
            },
            {
              "feature": "precision_trigger_confidence",
              "weight": 0.55,
              "normalized": -0.77,
              "delta": -0.42350000000000004
            },
            {
              "feature": "momentum_trail_lock_ratio",
              "weight": 0.4,
              "normalized": -0.48,
              "delta": -0.192
            }
          ],
          "reason": "sklearn_missing"
        },
        "realtime_stats": {
          "samples": 1,
          "min_price": 111511.51,
          "max_price": 111511.51,
          "mean_price": 111511.51,
          "latency_avg": 0.0,
          "latency_max": 0.0,
          "latency_median": 0.0,
          "latency_latest": 0.0
        },
        "anchor_side": "short",
        "anchor_price": 149.925003,
        "anchor_timestamp": "2025-10-17T10:59:39Z",
        "previous_p_score": 21.0,
        "action_plan": {
          "status": "standby",
          "priority": "low",
          "summary": "Nincs belépő – dolgozd le a hiányzó feltételeket.",
          "steps": [],
          "blockers": [
            "Trend filter nem támogatja az irányt.",
            "Nincs egyértelmű bias – várj megerősítésre.",
            "5m struktúra nem erősíti meg a setupot.",
            "ATR feltétel nem teljesült – volatilitás nem megfelelő.",
            "P_score>=60"
          ],
          "blockers_raw": [
            "regime",
            "bias",
            "bos5m",
            "atr",
            "P_score>=60"
          ],
          "notes": [
            "Range expanzió >1.5×ATR — agresszív menedzsment indokolt.",
            "Összesített valószínűség: 14%.",
            "Ajánlott tőkeáttétel: ×2.0.",
            "Pozíciómenedzsment: short kitettség gyenge trendben → méretcsökkentés vagy zárás mérlegelendő (aktív short pozíció, nyitva: 2025-10-17 12:59 helyi idő; 1h ATR ≈ 302.0)",
            "Bias neutrálsávban",
            "Regime filter inaktív",
            "ATR nincs rendben (relatív vagy abszolút küszöb)",
            "Alacsony realised vol → magasabb RR igény",
            "Fib zóna konfluencia (0.618–0.886) (+18.0)",
            "Diagnosztika: spot: realtime mintavétel kényszerítve (spot_error)"
          ],
          "context": {
            "asset": "BTCUSD",
            "decision": "no entry",
            "probability": 14,
            "session_open": true,
            "session_entry_open": true,
            "session_status": "open",
            "intraday_profile": {
              "range_state": "expansion",
              "range_position": 0.5319268933185252,
              "range_vs_atr": 8.615559821689981,
              "range_guard": {
                "long": false,
                "short": false
              },
              "opening_break": "none"
            }
          }
        }
      },
      "intervention_watch": {
        "irs": 10,
        "band": "LOW",
        "since_utc": "2025-10-24T20:44:33Z",
        "updated_utc": "2025-10-25T19:42:53Z",
        "reasons": [],
        "policy": [
          "increase_spread_buffer_when_volatility>=1.5×",
          "discord_alert_cooldown:10m"
        ],
        "metrics": {
          "price": 111651.8,
          "roc_30m_pct": 0.04151230221959708,
          "roc_5m_pct": 0.035058743778824265,
          "atr5_usd": 65.85642857142895,
          "atr5_ratio": 0.9756043363014233,
          "range_position_pct": 80.11247688013165,
          "session_points": 0.0,
          "comms_points": 0.0,
          "comms_from_flag": 0.0,
          "comms_from_sentiment": 0.0,
          "sentiment_score": null,
          "components": {
            "speed": 0.0,
            "volatility": 0.0,
            "range": 10.0,
            "comms": 0.0
          },
          "variance_ratio": 0.1647862545275073
        },
        "score_breakdown": {
          "speed": 0.0,
          "volatility": 0.0,
          "range": 10.0,
          "comms": 0.0
        },
        "news_flag": 0
      }
    },
    "USOIL": {
      "asset": "USOIL",
      "ok": false,
      "retrieved_at_utc": "2025-10-25T19:42:53Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 61.44,
        "utc": "2025-10-25T19:39:56+00:00",
        "retrieved_at_utc": "2025-10-25T19:39:56+00:00"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 20,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": false,
        "entry_open": false,
        "within_window": true,
        "within_entry_window": true,
        "within_monitor_window": true,
        "weekday_ok": false,
        "now_utc": "2025-10-25T19:42:53.467801+00:00",
        "windows_utc": [
          [
            0,
            30,
            23,
            0
          ]
        ],
        "monitor_windows_utc": [
          [
            0,
            0,
            23,
            59
          ]
        ],
        "time_zone": "Europe/Berlin",
        "windows_local_cet": [
          [
            "02:30",
            "01:00"
          ]
        ],
        "monitor_windows_local_cet": [
          [
            "02:00",
            "01:59"
          ]
        ],
        "allowed_weekdays": [
          0,
          1,
          2,
          3,
          4,
          6
        ],
        "status": "closed_weekend",
        "status_note": "Piac zárva (hétvége)",
        "next_open_utc": "2025-10-26T00:30:00+00:00"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-24T20:59:00Z",
            "last_closed_utc": "2025-10-24T20:59:00Z",
            "latency_seconds": 81833,
            "expected_max_delay_seconds": 180,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 420.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "WTI/USD",
            "used_exchange": null
          },
          "k5m": {
            "last_raw_utc": "2025-10-24T20:55:00Z",
            "last_closed_utc": "2025-10-24T20:55:00Z",
            "latency_seconds": 82073,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 1200.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "WTI/USD",
            "used_exchange": null
          },
          "k1h": {
            "last_raw_utc": "2025-10-24T20:00:00Z",
            "last_closed_utc": "2025-10-24T20:00:00Z",
            "latency_seconds": 85373,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 9000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "WTI/USD",
            "used_exchange": null
          },
          "k4h": {
            "last_raw_utc": "2025-10-24T20:00:00Z",
            "last_closed_utc": "2025-10-24T20:00:00Z",
            "latency_seconds": 85373,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "stale_for_signals": true,
            "freshness_limit_seconds": 36000.0,
            "freshness_violation": false,
            "freshness_retries": 0,
            "used_symbol": "WTI/USD",
            "used_exchange": null
          },
          "spot": {
            "last_raw_utc": "2025-10-25T19:39:56Z",
            "latency_seconds": 177,
            "expected_max_delay_seconds": 900,
            "source_mtime_utc": "2025-10-25T19:42:34Z",
            "source": "twelvedata:quote",
            "fallback_used": false,
            "realtime_override": false,
            "freshness_limit_seconds": 900.0,
            "freshness_retries": 0,
            "freshness_violation": false,
            "freshness_violation_meta": false,
            "used_symbol": "WTI/USD",
            "used_exchange": null
          }
        },
        "source_files": {
          "spot.json": "2025-10-25T19:42:34Z",
          "klines_1m.json": "2025-10-25T19:42:34Z",
          "klines_5m.json": "2025-10-25T19:42:34Z",
          "klines_1h.json": "2025-10-25T19:42:34Z",
          "klines_4h.json": "2025-10-25T19:42:34Z"
        },
        "latency_flags": [
          "k1m: utolsó zárt gyertya 1363 perc késésben van",
          "k1m: jelzés korlátozva 1363 perc késés miatt",
          "k5m: utolsó zárt gyertya 1367 perc késésben van",
          "k5m: jelzés korlátozva 1367 perc késés miatt",
          "k1h: utolsó zárt gyertya 1422 perc késésben van",
          "k1h: jelzés korlátozva 1422 perc késés miatt",
          "k4h: utolsó zárt gyertya 1422 perc késésben van",
          "k4h: jelzés korlátozva 1422 perc késés miatt"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
          "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, BTCUSD, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "k1h: jelzés korlátozva — 1422 perc késés",
        "k4h: jelzés korlátozva — 1422 perc késés"
      ]
    }
  },
  "latency_flags": [
    "k1m: utolsó zárt gyertya 1318 perc késésben van",
    "k1m: jelzés korlátozva 1318 perc késés miatt",
    "k5m: utolsó zárt gyertya 1322 perc késésben van",
    "k5m: jelzés korlátozva 1322 perc késés miatt",
    "k1h: utolsó zárt gyertya 1362 perc késésben van",
    "k1h: jelzés korlátozva 1362 perc késés miatt",
    "k4h: utolsó zárt gyertya 1422 perc késésben van",
    "k4h: jelzés korlátozva 1422 perc késés miatt",
    "k1m: utolsó zárt gyertya 408 perc késésben van",
    "k1m: jelzés korlátozva 408 perc késés miatt",
    "k5m: utolsó zárt gyertya 407 perc késésben van",
    "k5m: jelzés korlátozva 407 perc késés miatt",
    "k1h: utolsó zárt gyertya 462 perc késésben van",
    "k1h: jelzés korlátozva 462 perc késés miatt",
    "k4h: utolsó zárt gyertya 462 perc késésben van",
    "k1m: utolsó zárt gyertya 1423 perc késésben van",
    "k1m: jelzés korlátozva 1423 perc késés miatt",
    "k5m: utolsó zárt gyertya 1427 perc késésben van",
    "k5m: jelzés korlátozva 1427 perc késés miatt",
    "k1h: utolsó zárt gyertya 1452 perc késésben van",
    "k1h: jelzés korlátozva 1452 perc késés miatt",
    "k4h: utolsó zárt gyertya 1572 perc késésben van",
    "k4h: jelzés korlátozva 1572 perc késés miatt",
    "spot: realtime mintavétel kényszerítve (spot_error)",
    "k1m: utolsó zárt gyertya 1423 perc késésben van",
    "k1m: jelzés korlátozva 1423 perc késés miatt",
    "k5m: utolsó zárt gyertya 1427 perc késésben van",
    "k5m: jelzés korlátozva 1427 perc késés miatt",
    "k1h: utolsó zárt gyertya 1452 perc késésben van",
    "k1h: jelzés korlátozva 1452 perc késés miatt",
    "k4h: utolsó zárt gyertya 1572 perc késésben van",
    "k4h: jelzés korlátozva 1572 perc késés miatt",
    "spot: realtime mintavétel kényszerítve (spot_error)",
    "k4h: utolsó zárt gyertya 462 perc késésben van",
    "k1m: utolsó zárt gyertya 1363 perc késésben van",
    "k1m: jelzés korlátozva 1363 perc késés miatt",
    "k5m: utolsó zárt gyertya 1367 perc késésben van",
    "k5m: jelzés korlátozva 1367 perc késés miatt",
    "k1h: utolsó zárt gyertya 1422 perc késésben van",
    "k1h: jelzés korlátozva 1422 perc késés miatt",
    "k4h: utolsó zárt gyertya 1422 perc késésben van",
    "k4h: jelzés korlátozva 1422 perc késés miatt"
  ],
  "troubleshooting": [
    "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
    "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
    "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
    "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
    "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell.",
    "Hiányzó ML modellek: EURUSD, GOLD_CFD, NVDA, SRTY, BTCUSD, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához.",
    "Hiányzó ML modellek: BTCUSD, EURUSD, GOLD_CFD, NVDA, SRTY, USOIL – töltsd fel a public/models/<asset>_gbm.pkl fájlokat a valószínűségi score aktiválásához."
  ],
  "pipeline_monitoring": {
    "trading": {
      "started_utc": "2025-10-25T19:39:55Z",
      "completed_utc": "2025-10-25T19:42:14Z",
      "duration_seconds": 138.746
    },
    "updated_utc": "2025-10-25T19:42:51Z",
    "analysis": {
      "started_utc": "2025-10-25T19:42:51Z",
      "lag_from_trading_seconds": 37.437,
      "lag_threshold_seconds": 240,
      "lag_breached": false
    }
  },
  "ml_models_missing": {
    "EURUSD": "public/models/EURUSD_gbm.pkl",
    "GOLD_CFD": "public/models/GOLD_CFD_gbm.pkl",
    "NVDA": "public/models/NVDA_gbm.pkl",
    "SRTY": "public/models/SRTY_gbm.pkl",
    "BTCUSD": "public/models/BTCUSD_gbm.pkl",
    "USOIL": "public/models/USOIL_gbm.pkl"
  }
}