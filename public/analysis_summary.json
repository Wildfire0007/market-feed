{
  "ok": true,
  "generated_utc": "2025-10-17T21:51:54Z",
  "assets": {
    "EURUSD": {
      "asset": "EURUSD",
      "ok": true,
      "retrieved_at_utc": "2025-10-17T21:51:55Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 1.16508,
        "utc": "2025-10-17T21:45:00+00:00",
        "retrieved_at_utc": "2025-10-17T21:49:41+00:00",
        "source": "quote",
        "realtime_override": false,
        "fallback_used": false
      },
      "signal": "no entry",
      "probability": 20,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 5.0,
      "stale_timeframes": {
        "k1m": true,
        "k5m": false,
        "k1h": false,
        "k4h": false
      },
      "biases": {
        "raw_4h": "neutral",
        "raw_1h": "neutral",
        "adjusted_4h": "neutral",
        "adjusted_1h": "neutral"
      },
      "gates": {
        "mode": "core",
        "required": [
          "session",
          "regime",
          "bias",
          "bos5m",
          "liquidity(fib zone)",
          "atr",
          "rr_math>=2.0",
          "tp_min_profit",
          "min_stoploss",
          "tp1_net>=+0.35%"
        ],
        "missing": [
          "regime",
          "bias",
          "bos5m",
          "liquidity",
          "atr",
          "P_score>=60"
        ]
      },
      "session_info": {
        "open": true,
        "entry_open": true,
        "within_window": true,
        "within_entry_window": true,
        "within_monitor_window": true,
        "weekday_ok": true,
        "now_utc": "2025-10-17T21:51:55.021785+00:00",
        "windows_utc": [
          [
            0,
            0,
            23,
            59
          ]
        ],
        "time_zone": "Europe/Berlin",
        "windows_local_cet": [
          [
            "02:00",
            "01:59"
          ]
        ],
        "allowed_weekdays": [
          0,
          1,
          2,
          3,
          4,
          6
        ],
        "status": "open",
        "status_note": "Piac nyitva"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-17T21:45:00Z",
            "last_closed_utc": "2025-10-17T21:45:00Z",
            "latency_seconds": 415,
            "expected_max_delay_seconds": 60,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k5m": {
            "last_raw_utc": "2025-10-17T21:45:00Z",
            "last_closed_utc": "2025-10-17T21:45:00Z",
            "latency_seconds": 415,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": false
          },
          "k1h": {
            "last_raw_utc": "2025-10-17T21:00:00Z",
            "last_closed_utc": "2025-10-17T21:00:00Z",
            "latency_seconds": 3115,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": false
          },
          "k4h": {
            "last_raw_utc": "2025-10-17T20:00:00Z",
            "last_closed_utc": "2025-10-17T20:00:00Z",
            "latency_seconds": 6715,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": false
          },
          "spot": {
            "last_raw_utc": "2025-10-17T21:45:00Z",
            "latency_seconds": 415,
            "expected_max_delay_seconds": 1200,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "source": "quote",
            "fallback_used": false,
            "realtime_override": false
          }
        },
        "source_files": {
          "spot.json": "2025-10-17T21:51:39Z",
          "klines_1m.json": "2025-10-17T21:51:39Z",
          "klines_5m.json": "2025-10-17T21:51:39Z",
          "klines_1h.json": "2025-10-17T21:51:39Z",
          "klines_4h.json": "2025-10-17T21:51:39Z"
        },
        "latency_flags": [
          "k1m: utolsó zárt gyertya 6 perc késésben van",
          "k1m: jelzés korlátozva 6 perc késés miatt"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell."
        ]
      },
      "reasons": [
        "Diagnosztika: k1m: utolsó zárt gyertya 6 perc késésben van",
        "Diagnosztika: k1m: jelzés korlátozva 6 perc késés miatt",
        "missing: regime, bias, bos5m, liquidity, atr, P_score>=60"
      ],
      "ema21_slope_1h": -0.0005377241760640777,
      "ema21_slope_threshold": 0.0006,
      "ema21_relation_1h": "below",
      "last_swing_high_1h": 1.167406,
      "last_swing_low_1h": 1.16671,
      "last_close_1h": 1.16508,
      "bos_5m_dir": "range",
      "atr1h": 0.0014605000000000074,
      "momentum_volume_ratio": null,
      "momentum_liquidity_ok": true,
      "invalid_levels": {
        "buy": 1.16597975,
        "sell": 1.1681362499999999
      },
      "invalid_buffer_abs": 0.0007302500000000037,
      "active_position_meta": {
        "ema21_slope_abs": 0.0005377241760640777,
        "ema21_slope_signed": -0.0005377241760640777,
        "ema21_slope_threshold": 0.0006,
        "ema21_relation": "below",
        "structure_5m": "range",
        "stale_timeframes": {
          "k1m": true,
          "k5m": false,
          "k1h": false,
          "k4h": false
        },
        "atr1h": 0.0014605000000000074,
        "atr1h_trail_floor": 0.0007302500000000037,
        "atr5": 0.0003450714285714148,
        "atr5_rel": 0.0002961783127093546,
        "atr5_threshold": 0.0005,
        "bos1h_long": false,
        "bos1h_short": true,
        "regime_ok": false,
        "effective_bias": "neutral",
        "last_close_1h": 1.16508,
        "last_swing_high_1h": 1.167406,
        "last_swing_low_1h": 1.16671,
        "invalid_level_sell": 1.1681362499999999,
        "invalid_level_buy": 1.16597975,
        "invalid_buffer_abs": 0.0007302500000000037,
        "p_score": 20,
        "tp_profile": {
          "tp1_r": 2.0,
          "tp2_r": 3.0
        }
      }
    },
    "GOLD_CFD": {
      "asset": "GOLD_CFD",
      "ok": true,
      "retrieved_at_utc": "2025-10-17T21:51:55Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 4265.91,
        "utc": "2025-10-17T21:45:00+00:00",
        "retrieved_at_utc": "2025-10-17T21:49:47+00:00",
        "source": "quote",
        "realtime_override": false,
        "fallback_used": false
      },
      "signal": "market closed",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 2.0,
      "stale_timeframes": {
        "k1m": true,
        "k5m": false,
        "k1h": false,
        "k4h": false
      },
      "biases": {
        "raw_4h": "long",
        "raw_1h": "neutral",
        "adjusted_4h": "long",
        "adjusted_1h": "neutral"
      },
      "gates": {
        "mode": "session_closed",
        "required": [
          "session"
        ],
        "missing": [
          "session",
          "regime"
        ]
      },
      "session_info": {
        "open": false,
        "entry_open": false,
        "within_window": false,
        "within_entry_window": false,
        "within_monitor_window": false,
        "weekday_ok": true,
        "now_utc": "2025-10-17T21:51:55.684721+00:00",
        "windows_utc": [
          [
            7,
            0,
            17,
            30
          ],
          [
            8,
            0,
            18,
            30
          ]
        ],
        "monitor_windows_utc": [
          [
            0,
            0,
            23,
            59
          ]
        ],
        "time_zone": "Europe/Berlin",
        "windows_local_cet": [
          [
            "09:00",
            "19:30"
          ],
          [
            "10:00",
            "20:30"
          ]
        ],
        "monitor_windows_local_cet": [
          [
            "02:00",
            "01:59"
          ]
        ],
        "allowed_weekdays": [
          0,
          1,
          2,
          3,
          4,
          6
        ],
        "daily_break_active": true,
        "daily_break_window_utc": [
          "21:00",
          "22:00"
        ],
        "daily_break_window_cet": [
          "23:00",
          "00:00"
        ],
        "special_closure_reason": "friday_close",
        "status": "closed_out_of_hours",
        "status_note": "Piac zárva (pénteki zárás 20:30 UTC)",
        "next_open_utc": "2025-10-19T07:00:00+00:00"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-17T21:48:00Z",
            "last_closed_utc": "2025-10-17T21:48:00Z",
            "latency_seconds": 235,
            "expected_max_delay_seconds": 60,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k5m": {
            "last_raw_utc": "2025-10-17T21:45:00Z",
            "last_closed_utc": "2025-10-17T21:45:00Z",
            "latency_seconds": 415,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": false
          },
          "k1h": {
            "last_raw_utc": "2025-10-17T21:00:00Z",
            "last_closed_utc": "2025-10-17T21:00:00Z",
            "latency_seconds": 3115,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": false
          },
          "k4h": {
            "last_raw_utc": "2025-10-17T20:00:00Z",
            "last_closed_utc": "2025-10-17T20:00:00Z",
            "latency_seconds": 6715,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": false
          },
          "spot": {
            "last_raw_utc": "2025-10-17T21:45:00Z",
            "latency_seconds": 415,
            "expected_max_delay_seconds": 2700,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "source": "quote",
            "fallback_used": false,
            "realtime_override": false
          }
        },
        "source_files": {
          "spot.json": "2025-10-17T21:51:39Z",
          "klines_1m.json": "2025-10-17T21:51:39Z",
          "klines_5m.json": "2025-10-17T21:51:39Z",
          "klines_1h.json": "2025-10-17T21:51:39Z",
          "klines_4h.json": "2025-10-17T21:51:39Z"
        },
        "latency_flags": [
          "k1m: jelzés korlátozva 3 perc késés miatt"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell."
        ]
      },
      "reasons": [
        "Piac zárva (pénteki zárás 20:30 UTC)",
        "Bias(4H→1H)=long",
        "5M BOS trendirányba",
        "Fib zóna konfluencia (0.618–0.886)",
        "ATR rendben",
        "Diagnosztika: k1m: jelzés korlátozva 3 perc késés miatt",
        "missing: session, regime"
      ],
      "ema21_slope_1h": -0.003161392938730654,
      "ema21_slope_threshold": 0.0008,
      "ema21_relation_1h": "below",
      "last_swing_high_1h": 4243.18,
      "last_swing_low_1h": 4225.64,
      "last_close_1h": 4265.91,
      "bos_5m_dir": "bos_up",
      "atr1h": 54.84928571428548,
      "momentum_volume_ratio": null,
      "momentum_liquidity_ok": true,
      "invalid_levels": {
        "buy": 4198.215357142858,
        "sell": 4270.604642857143
      },
      "invalid_buffer_abs": 27.42464285714274,
      "active_position_meta": {
        "ema21_slope_abs": 0.003161392938730654,
        "ema21_slope_signed": -0.003161392938730654,
        "ema21_slope_threshold": 0.0008,
        "ema21_relation": "below",
        "structure_5m": "bos_up",
        "stale_timeframes": {
          "k1m": true,
          "k5m": false,
          "k1h": false,
          "k4h": false
        },
        "atr1h": 54.84928571428548,
        "atr1h_trail_floor": 27.42464285714274,
        "atr5": 6.198571428571411,
        "atr5_rel": 0.0014530478675291816,
        "atr5_threshold": 0.0006,
        "bos1h_long": true,
        "bos1h_short": false,
        "regime_ok": false,
        "effective_bias": "long",
        "last_close_1h": 4265.91,
        "last_swing_high_1h": 4243.18,
        "last_swing_low_1h": 4225.64,
        "invalid_level_sell": 4270.604642857143,
        "invalid_level_buy": 4198.215357142858,
        "invalid_buffer_abs": 27.42464285714274,
        "p_score": 0,
        "tp_profile": {
          "tp1_r": 2.0,
          "tp2_r": 3.0
        },
        "anchor_side": "long",
        "anchor_price": 4231.3,
        "anchor_timestamp": "2025-10-17T17:52:52Z",
        "previous_p_score": 0.0
      }
    },
    "USDJPY": {
      "asset": "USDJPY",
      "ok": false,
      "retrieved_at_utc": "2025-10-17T21:51:56Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 150.584,
        "utc": "2025-10-17T20:55:00Z",
        "retrieved_at_utc": "2025-10-17T21:51:56Z"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 5.0,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": null,
        "within_window": null,
        "weekday_ok": null,
        "status": "unavailable",
        "status_note": "Hiányzó adat"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-17T20:59:00Z",
            "last_closed_utc": "2025-10-17T20:59:00Z",
            "latency_seconds": 3176,
            "expected_max_delay_seconds": 60,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k5m": {
            "last_raw_utc": "2025-10-17T20:55:00Z",
            "last_closed_utc": "2025-10-17T20:55:00Z",
            "latency_seconds": 3416,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k1h": {
            "last_raw_utc": "2025-10-17T20:00:00Z",
            "last_closed_utc": "2025-10-17T20:00:00Z",
            "latency_seconds": 6716,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k4h": {
            "last_raw_utc": "2025-10-17T20:00:00Z",
            "last_closed_utc": "2025-10-17T20:00:00Z",
            "latency_seconds": 6716,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": false
          },
          "spot": {
            "last_raw_utc": "2025-10-17T20:55:00Z",
            "latency_seconds": 3416,
            "expected_max_delay_seconds": 1200,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "source": "kline_5m_close",
            "fallback_used": true,
            "realtime_override": false,
            "original_issue": "Spot data stale: 56 min behind (limit 20 min)"
          }
        },
        "source_files": {
          "spot.json": "2025-10-17T21:51:39Z",
          "klines_1m.json": "2025-10-17T21:51:39Z",
          "klines_5m.json": "2025-10-17T21:51:39Z",
          "klines_1h.json": "2025-10-17T21:51:39Z",
          "klines_4h.json": "2025-10-17T21:51:39Z"
        },
        "latency_flags": [
          "spot: spot data stale: 56 min behind (limit 20 min) — 5m zárt gyertya árát használjuk",
          "k1m: utolsó zárt gyertya 52 perc késésben van",
          "k1m: jelzés korlátozva 52 perc késés miatt",
          "k5m: utolsó zárt gyertya 56 perc késésben van",
          "k5m: jelzés korlátozva 56 perc késés miatt",
          "k1h: utolsó zárt gyertya 111 perc késésben van",
          "k1h: jelzés korlátozva 111 perc késés miatt"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "5m candles túl régen zártak — 56 perc késés",
        "1h idősík késik — 111 perc késés"
      ]
    },
    "USOIL": {
      "asset": "USOIL",
      "ok": false,
      "retrieved_at_utc": "2025-10-17T21:51:56Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 57.639999,
        "utc": "2025-10-17T20:55:00Z",
        "retrieved_at_utc": "2025-10-17T21:51:56Z"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 2.0,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": null,
        "within_window": null,
        "weekday_ok": null,
        "status": "unavailable",
        "status_note": "Hiányzó adat"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-17T20:59:00Z",
            "last_closed_utc": "2025-10-17T20:59:00Z",
            "latency_seconds": 3176,
            "expected_max_delay_seconds": 60,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k5m": {
            "last_raw_utc": "2025-10-17T20:55:00Z",
            "last_closed_utc": "2025-10-17T20:55:00Z",
            "latency_seconds": 3416,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k1h": {
            "last_raw_utc": "2025-10-17T20:00:00Z",
            "last_closed_utc": "2025-10-17T20:00:00Z",
            "latency_seconds": 6716,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k4h": {
            "last_raw_utc": "2025-10-17T20:00:00Z",
            "last_closed_utc": "2025-10-17T20:00:00Z",
            "latency_seconds": 6716,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": false
          },
          "spot": {
            "last_raw_utc": "2025-10-17T20:55:00Z",
            "latency_seconds": 3416,
            "expected_max_delay_seconds": 2700,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "source": "kline_5m_close",
            "fallback_used": true,
            "realtime_override": false,
            "original_issue": "Spot data stale: 56 min behind (limit 45 min)"
          }
        },
        "source_files": {
          "spot.json": "2025-10-17T21:51:39Z",
          "klines_1m.json": "2025-10-17T21:51:39Z",
          "klines_5m.json": "2025-10-17T21:51:39Z",
          "klines_1h.json": "2025-10-17T21:51:39Z",
          "klines_4h.json": "2025-10-17T21:51:39Z"
        },
        "latency_flags": [
          "spot: spot data stale: 56 min behind (limit 45 min) — 5m zárt gyertya árát használjuk",
          "k1m: utolsó zárt gyertya 52 perc késésben van",
          "k1m: jelzés korlátozva 52 perc késés miatt",
          "k5m: utolsó zárt gyertya 56 perc késésben van",
          "k5m: jelzés korlátozva 56 perc késés miatt",
          "k1h: utolsó zárt gyertya 111 perc késésben van",
          "k1h: jelzés korlátozva 111 perc késés miatt"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "5m candles túl régen zártak — 56 perc késés",
        "1h idősík késik — 111 perc késés"
      ]
    },
    "NVDA": {
      "asset": "NVDA",
      "ok": false,
      "retrieved_at_utc": "2025-10-17T21:51:57Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 183.240005,
        "utc": "2025-10-17T19:55:00Z",
        "retrieved_at_utc": "2025-10-17T21:51:57Z"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 2.0,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": null,
        "within_window": null,
        "weekday_ok": null,
        "status": "unavailable",
        "status_note": "Hiányzó adat"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-17T19:59:00Z",
            "last_closed_utc": "2025-10-17T19:59:00Z",
            "latency_seconds": 6777,
            "expected_max_delay_seconds": 60,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k5m": {
            "last_raw_utc": "2025-10-17T19:55:00Z",
            "last_closed_utc": "2025-10-17T19:55:00Z",
            "latency_seconds": 7017,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k1h": {
            "last_raw_utc": "2025-10-17T19:30:00Z",
            "last_closed_utc": "2025-10-17T19:30:00Z",
            "latency_seconds": 8517,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k4h": {
            "last_raw_utc": "2025-10-17T17:30:00Z",
            "last_closed_utc": "2025-10-17T17:30:00Z",
            "latency_seconds": 15717,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": false
          },
          "spot": {
            "last_raw_utc": "2025-10-17T19:55:00Z",
            "latency_seconds": 7017,
            "expected_max_delay_seconds": 900,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "source": "kline_5m_close",
            "fallback_used": true,
            "realtime_override": false,
            "original_issue": "Spot data stale: 116 min behind (limit 15 min)"
          }
        },
        "source_files": {
          "spot.json": "2025-10-17T21:51:39Z",
          "klines_1m.json": "2025-10-17T21:51:39Z",
          "klines_5m.json": "2025-10-17T21:51:39Z",
          "klines_1h.json": "2025-10-17T21:51:39Z",
          "klines_4h.json": "2025-10-17T21:51:39Z"
        },
        "latency_flags": [
          "spot: spot data stale: 116 min behind (limit 15 min) — 5m zárt gyertya árát használjuk",
          "k1m: utolsó zárt gyertya 112 perc késésben van",
          "k1m: jelzés korlátozva 112 perc késés miatt",
          "k5m: utolsó zárt gyertya 116 perc késésben van",
          "k5m: jelzés korlátozva 116 perc késés miatt",
          "k1h: utolsó zárt gyertya 141 perc késésben van",
          "k1h: jelzés korlátozva 141 perc késés miatt",
          "k4h: utolsó zárt gyertya 261 perc késésben van"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "5m candles túl régen zártak — 116 perc késés",
        "1h idősík késik — 141 perc késés"
      ]
    },
    "SRTY": {
      "asset": "SRTY",
      "ok": false,
      "retrieved_at_utc": "2025-10-17T21:51:58Z",
      "source": "Twelve Data (lokális JSON)",
      "spot": {
        "price": 11.45,
        "utc": "2025-10-17T19:55:00Z",
        "retrieved_at_utc": "2025-10-17T21:51:58Z"
      },
      "signal": "no entry",
      "probability": 0,
      "entry": null,
      "sl": null,
      "tp1": null,
      "tp2": null,
      "rr": null,
      "leverage": 2.0,
      "gates": {
        "mode": "data_gap",
        "required": [
          "data_integrity"
        ],
        "missing": [
          "data_integrity"
        ]
      },
      "session_info": {
        "open": null,
        "within_window": null,
        "weekday_ok": null,
        "status": "unavailable",
        "status_note": "Hiányzó adat"
      },
      "diagnostics": {
        "timeframes": {
          "k1m": {
            "last_raw_utc": "2025-10-17T19:59:00Z",
            "last_closed_utc": "2025-10-17T19:59:00Z",
            "latency_seconds": 6778,
            "expected_max_delay_seconds": 60,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k5m": {
            "last_raw_utc": "2025-10-17T19:55:00Z",
            "last_closed_utc": "2025-10-17T19:55:00Z",
            "latency_seconds": 7018,
            "expected_max_delay_seconds": 300,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k1h": {
            "last_raw_utc": "2025-10-17T19:30:00Z",
            "last_closed_utc": "2025-10-17T19:30:00Z",
            "latency_seconds": 8518,
            "expected_max_delay_seconds": 3600,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": true
          },
          "k4h": {
            "last_raw_utc": "2025-10-17T17:30:00Z",
            "last_closed_utc": "2025-10-17T17:30:00Z",
            "latency_seconds": 15718,
            "expected_max_delay_seconds": 14400,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "stale_for_signals": false
          },
          "spot": {
            "last_raw_utc": "2025-10-17T19:55:00Z",
            "latency_seconds": 7018,
            "expected_max_delay_seconds": 900,
            "source_mtime_utc": "2025-10-17T21:51:39Z",
            "source": "kline_5m_close",
            "fallback_used": true,
            "realtime_override": false,
            "original_issue": "Spot data stale: 116 min behind (limit 15 min)"
          }
        },
        "source_files": {
          "spot.json": "2025-10-17T21:51:39Z",
          "klines_1m.json": "2025-10-17T21:51:39Z",
          "klines_5m.json": "2025-10-17T21:51:39Z",
          "klines_1h.json": "2025-10-17T21:51:39Z",
          "klines_4h.json": "2025-10-17T21:51:39Z"
        },
        "latency_flags": [
          "spot: spot data stale: 116 min behind (limit 15 min) — 5m zárt gyertya árát használjuk",
          "k1m: utolsó zárt gyertya 112 perc késésben van",
          "k1m: jelzés korlátozva 112 perc késés miatt",
          "k5m: utolsó zárt gyertya 116 perc késésben van",
          "k5m: jelzés korlátozva 116 perc késés miatt",
          "k1h: utolsó zárt gyertya 141 perc késésben van",
          "k1h: jelzés korlátozva 141 perc késés miatt",
          "k4h: utolsó zárt gyertya 261 perc késésben van"
        ],
        "refresh_tips": [
          "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
          "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
          "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
          "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
          "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell."
        ]
      },
      "reasons": [
        "Critical data latency — belépés tiltva",
        "5m candles túl régen zártak — 116 perc késés",
        "1h idősík késik — 141 perc késés"
      ]
    }
  },
  "latency_flags": [
    "k1m: utolsó zárt gyertya 6 perc késésben van",
    "k1m: jelzés korlátozva 6 perc késés miatt",
    "k1m: jelzés korlátozva 3 perc késés miatt",
    "spot: spot data stale: 56 min behind (limit 20 min) — 5m zárt gyertya árát használjuk",
    "k1m: utolsó zárt gyertya 52 perc késésben van",
    "k1m: jelzés korlátozva 52 perc késés miatt",
    "k5m: utolsó zárt gyertya 56 perc késésben van",
    "k5m: jelzés korlátozva 56 perc késés miatt",
    "k1h: utolsó zárt gyertya 111 perc késésben van",
    "k1h: jelzés korlátozva 111 perc késés miatt",
    "spot: spot data stale: 56 min behind (limit 45 min) — 5m zárt gyertya árát használjuk",
    "k1m: utolsó zárt gyertya 52 perc késésben van",
    "k1m: jelzés korlátozva 52 perc késés miatt",
    "k5m: utolsó zárt gyertya 56 perc késésben van",
    "k5m: jelzés korlátozva 56 perc késés miatt",
    "k1h: utolsó zárt gyertya 111 perc késésben van",
    "k1h: jelzés korlátozva 111 perc késés miatt",
    "spot: spot data stale: 116 min behind (limit 15 min) — 5m zárt gyertya árát használjuk",
    "k1m: utolsó zárt gyertya 112 perc késésben van",
    "k1m: jelzés korlátozva 112 perc késés miatt",
    "k5m: utolsó zárt gyertya 116 perc késésben van",
    "k5m: jelzés korlátozva 116 perc késés miatt",
    "k1h: utolsó zárt gyertya 141 perc késésben van",
    "k1h: jelzés korlátozva 141 perc késés miatt",
    "k4h: utolsó zárt gyertya 261 perc késésben van",
    "spot: spot data stale: 116 min behind (limit 15 min) — 5m zárt gyertya árát használjuk",
    "k1m: utolsó zárt gyertya 112 perc késésben van",
    "k1m: jelzés korlátozva 112 perc késés miatt",
    "k5m: utolsó zárt gyertya 116 perc késésben van",
    "k5m: jelzés korlátozva 116 perc késés miatt",
    "k1h: utolsó zárt gyertya 141 perc késésben van",
    "k1h: jelzés korlátozva 141 perc késés miatt",
    "k4h: utolsó zárt gyertya 261 perc késésben van"
  ],
  "troubleshooting": [
    "Az analysis.py mindig a legutóbbi ZÁRT gyertyával számol (5m: max. ~5 perc késés).",
    "CI/CD-ben kösd össze a Trading és Analysis futást: az analysis job csak a trading után induljon (needs: trading).",
    "A kliens kéréséhez adj cache-busting query paramot (pl. ?v=<timestamp>) és no-store cache-control fejlécet.",
    "Cloudflare Worker stale policy: 5m feedre állítsd 120s-re, hogy hamar átjöjjön az új jel.",
    "A dashboard stabilizáló (2 azonos jel + 10 perc cooldown) lassíthatja a kártya frissítését — lazítsd, ha realtime kell."
  ]
}